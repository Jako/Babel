
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../tutorial/">
      
      
        <link rel="next" href="../../contributors/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.9">
    
    
      
        <title>SEO Friendly Multilingual Websites with MODX and Babel - Babel</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.f2e4d321.min.css">
      
      


    
    
      
    
    
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  <script type="text/javascript">
    var _paq = window._paq = window._paq || [];
    _paq.push(['setDocumentTitle', 'Babel' + '/' + document.title.replace(' - Babel', '')]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
        var u="//matomo.treehillstudio.com/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', 40]);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.type='text/javascript'; g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
<link href="../../assets/stylesheets/treehillstudio.css" rel="stylesheet">

   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#seo-friendly-multilingual-websites-with-modx-and-babel" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
<div class="header">
    
    

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Babel" class="md-header__button md-logo" aria-label="Babel" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Babel
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              SEO Friendly Multilingual Websites with MODX and Babel
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/mikrobi/babel" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    mikrobi/babel
  </div>
</a>
      </div>
    
  </nav>
  
</header>
</div>

    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Babel" class="md-nav__button md-logo" aria-label="Babel" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Babel
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mikrobi/babel" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    mikrobi/babel
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Description
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Usage
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multilingual Websites with MODX and Babel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    SEO Friendly Multilingual Websites with MODX and Babel
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    SEO Friendly Multilingual Websites with MODX and Babel
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#seo-friendly-multilingual-websites-with-modx-and-babel" class="md-nav__link">
    <span class="md-ellipsis">
      SEO Friendly Multilingual Websites with MODx and Babel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SEO Friendly Multilingual Websites with MODx and Babel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#technical-background" class="md-nav__link">
    <span class="md-ellipsis">
      Technical Background
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-by-step-instructions" class="md-nav__link">
    <span class="md-ellipsis">
      Step-by-Step Instructions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rewrite-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Rewrite Rules
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#is-this-approach-optimal" class="md-nav__link">
    <span class="md-ellipsis">
      Is this approach optimal?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-optimal-approach-babel-23" class="md-nav__link">
    <span class="md-ellipsis">
      The optimal approach: Babel 2.3!
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributors
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#seo-friendly-multilingual-websites-with-modx-and-babel" class="md-nav__link">
    <span class="md-ellipsis">
      SEO Friendly Multilingual Websites with MODx and Babel
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SEO Friendly Multilingual Websites with MODx and Babel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#technical-background" class="md-nav__link">
    <span class="md-ellipsis">
      Technical Background
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-by-step-instructions" class="md-nav__link">
    <span class="md-ellipsis">
      Step-by-Step Instructions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rewrite-rules" class="md-nav__link">
    <span class="md-ellipsis">
      Rewrite Rules
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#is-this-approach-optimal" class="md-nav__link">
    <span class="md-ellipsis">
      Is this approach optimal?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-optimal-approach-babel-23" class="md-nav__link">
    <span class="md-ellipsis">
      The optimal approach: Babel 2.3!
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>SEO Friendly Multilingual Websites with MODX and Babel</h1>

<h2 id="seo-friendly-multilingual-websites-with-modx-and-babel">SEO Friendly Multilingual Websites with MODx and Babel</h2>
<div class="admonition caution">
<p class="admonition-title">This is old!</p>
<p>This tutorial is a slightly modernized version of the <a href="https://web.archive.org/web/20180927220103/http://www.multilingual-modx.com/blog/2011/seo-friendly-multilingual-websites-with-modx-and-babel.html">old blog
entry</a>
on multilingual-modx.com which is available only in the WaybackMachine. It uses
a routing plugin for easier maintaining the contexts. The links in the
text are updated to actual or to WaybackMachine versions.</p>
</div>
<p>In my <a href="../tutorial/">previous article</a> about setting up multilingual websites
with MODx and Babel I described a solution which is based on different
(sub)domains for each language. This domain based approach is implemented easily
but has some drawbacks in a SEO point of view: By using different domains for
each language you automatically split up your site into several single sites.
Each site will be handled separately by search engines. For example, they won't
share the same page rank and backlinks. Using one domain and subfolders for each
language may improve your site's overall ranking: All backlinks are connected to
your top level domain. In this article I'll describe a possible solution of how
to set up a multilingual website with MODx and Babel by using one domain and
subfolders for each language.</p>
<p>This article doesn't focus on the SEO point of view. It's rather a technical
tutorial of how to set up a multilingual website by using subfolders. If you'd
like to read more about the "(sub)domains vs. subfolders" topic you may search
the web (there are a lot of articles about this topic) or read some of the
following posts of other blogs:</p>
<ul>
<li><a href="https://web.archive.org/web/20150810025806/http://seohawk.com/subfolders-subdomains-seo">Subfolders v/s Subdomains: Which one to choose for SEO?</a></li>
<li><a href="https://www.searchenginejournal.com/subdomains-vs-subfolders-seo/239795/">Subdomains or Subfolders : Which are Better for SEO?</a></li>
<li><a href="https://www.mattcutts.com/blog/subdomains-and-subdirectories/">Subdomains, Subfolders and Top-Level Domains</a></li>
<li><a href="https://moz.com/blog/subdomains-subfolders-and-toplevel-domains">Subdomains and subdirectories</a></li>
</ul>
<h3 id="technical-background">Technical Background</h3>
<p>I'll describe the procedure of setting up the multilingual site by providing a
fictional example site <em>https://​www.​example.com</em>. The main website is reachable via
<em>https://​www.​example.com</em> and is available in two languages:</p>
<ul>
<li>German: <em>https://​www.​example.com/de/</em></li>
<li>English: <em>http://​www.​example.com/en/</em></li>
</ul>
<p>For each language we are using one context: <em>web</em> for German, <em>en</em> for English.</p>
<h3 id="prerequisites">Prerequisites</h3>
<p>Before starting with this tutorial you should be sure that <strong>all</strong> requirements
for a multilingual site are satisfied:</p>
<ul>
<li>Friendly URLs are enabled: friendly_urls and use_alias_path are set to yes (1)</li>
<li>
<p>The Apache rewrite engine is activated and the rewrite base is set correctly:</p>
<div class="highlight"><pre><span></span><code>RewriteEngine On
RewriteBase /
</code></pre></div>
</li>
<li>
<p>If you're running your site in a non-root directory like /subfolder/mysite/xy you have to define your rewrite base like this:</p>
<div class="highlight"><pre><span></span><code>RewriteBase /subfolder/mysite/xy/
</code></pre></div>
</li>
<li>
<p>The base URL is set via the <base> Tag in your HTML head of all your templates:</p>
<div class="highlight"><pre><span></span><code>&lt;head&gt;
    ...
    &lt;base href=&quot;[[!++site_url]]&quot; /&gt;
    ...
&lt;/head&gt;
</code></pre></div>
</li>
</ul>
<h3 id="step-by-step-instructions">Step-by-Step Instructions</h3>
<p>You have to follow the five steps described in my previous article about setting
up multilingual websites and one additional step:</p>
<ol>
<li>Create your contexts for each language: no differences to domain based approach.</li>
<li>
<p>Configure language specific settings of all your contexts: <code>site_url</code>, <code>cultureKey</code> <strong>and</strong> <code>base_url</code>.<br></p>
<table>
<thead>
<tr>
<th>context</th>
<th>site_url</th>
<th>cultureKey</th>
<th>base_url</th>
</tr>
</thead>
<tbody>
<tr>
<td>web</td>
<td>https://​www.​example.com/de/</td>
<td>de</td>
<td>/de/</td>
</tr>
<tr>
<td>en</td>
<td>https://​www.​example.com/en/</td>
<td>en</td>
<td>/en/</td>
</tr>
</tbody>
</table>
<div class="admonition caution">
<p class="admonition-title">Differences to the non SEO version</p>
<p>Instead of using different domains in the <code>site_url</code> context setting you have to
use subfolders and additionally specifiy the <code>base_url</code> according to the context's
<code>cultureKey</code>.</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>You should also define settings like <code>site_start</code> <code>error_page</code> etc. for each of
your contexts. To maintain this entries a lot easier you can use the MODX Extra
<a href="https://extras.modx.com/package/crosscontextssettings">CrossContextsSettings</a>.</p>
</div>
</li>
<li>
<p>Grant the <em>"Load Only"</em> access policy for all your contexts to the <em>anonymous</em>
   group: no differences to domain based approach.</p>
</li>
<li>Install a routing extra from the MODX repository, i.e. SmartRouting, xRouting
   or LangRouter via the MODX package management</li>
<li>Install the Babel Extra via package management: no differences to domain based approach.</li>
<li>
<p>Change existing rewrite rules for friendly URLs and add additional rules to your .htaccess file (see next section for detailed description):</p>
<div class="highlight"><pre><span></span><code># redirect all requests to /en/favicon.ico and /de/favicon.ico
# to /favicon.ico
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(en|de)/favicon.ico$ favicon.ico [L,QSA]

# redirect all requests to /en/assets* and /de/assets* to /assets*
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(en|de)/assets(.*)$ assets$2 [L,QSA]
</code></pre></div>
</li>
</ol>
<h3 id="rewrite-rules">Rewrite Rules</h3>
<p>If you don't add the rewrite rules above to your .htaccess file the pages are
still accessible via the language subfolders and linking your pages with relative
links should work.</p>
<p>But there would be  a problem regarding relative links: linking assets like CSS,
JavaScripts, images etc. won't work properly. Normally all these files are
located somewhere in the assets subfolder of your MODx root directory. When
including an asset via a relative URL like <em>assets/css/style.css</em> the asset won't
be found:</p>
<ol>
<li>The browser will try to request something like
   <em>https://​www.​example.com/en/assets/css/style.css</em> because the site's URL
   <em>https://​www.​example.com/en/</em> (defined via the <code>site_url</code> context setting in step
   2) is used to handle relative URLs.</li>
<li>The rewrite rule from above will be applied and the request will be 
   internally forwarded to
   <em>https://​www.​example.com/index.php?cultureKey=en&amp;q=assets/css/style.css</em></li>
<li>MODx won't find any resource matching the alias <em>assets/css/style.css</em> and will
   return a 404 error code.</li>
</ol>
<p>To solve this problem you have to add another rewrite rule before
the rule from above which internally redirects all request to <em>/[ck]/assets/<em><em> to
</em>/assets/</em></em> where <em>[ck]</em> is a valid culture key:</p>
<div class="highlight"><pre><span></span><code>RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(en|de)/assets(.*)$ assets$2 [L,QSA]
</code></pre></div>
<p>Fine! Now you can use relative links for your pages and assets. Including images
with TinyMCE should work, too.</p>
<p>You may want to add some additional rewrite rules for other files which are
being referred via relative URLs. For example the <em>favicon.ico</em> in your root
directory:</p>
<div class="highlight"><pre><span></span><code>RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(en|de)/favicon.ico$ favicon.ico [L,QSA]
</code></pre></div>
<div class="admonition hint">
<p class="admonition-title">Other languages</p>
<p>If you're using other languages than German and English you have to change the
<em>(en|de)</em> part of the rewrite rule according to your needs. For example for a
website available in English, Spanish and French you can use the following favicon
rewrite rule:</p>
<div class="highlight"><pre><span></span><code>RewriteRule ^(en|es|fr)/favicon.ico$ favicon.ico [L,QSA]
</code></pre></div>
</div>
<p>Additionally, the server can automatically determine the language when the domain
root <em>https://​www​.example.com/</em> is requested and perform a redirect to the
suitable language version in the following way:</p>
<ul>
<li>When the accepted language is not German <em>(de)</em> and the root has been
  requested (relative request URI is empty) redirect to the English version
  <em>(en)</em>: see first condition and rewrite rule from below (line 2 and 3).</li>
<li>Otherwise, redirect to German version <em>(de)</em> when the root has been requested:
  see second rewrite rule from below (line 4).</li>
</ul>
<div class="highlight"><pre><span></span><code># detect language when requesting the root (/)
RewriteCond %{HTTP:Accept-Language} !^de [NC]
RewriteRule ^$ en/ [R=301,L]
RewriteRule ^$ de/ [R=301,L]
</code></pre></div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>That's very rudimentary. The condition only checks whether the value of
the <em>Accept-Language</em> HTTP header variable begins with the language (culture) key.
But this variable contains much more than only a language key: It's a list of
preferred (or even non-preferred) keys like this: <em>Accept-Language:
de-de,de;q=0.8,en-us;q=0.5,en;q=0.3</em>. The <em>q</em> variable specifies the importance of
the language from 0 to 1. Detecting the language with PHP in the gateway plugin
is much better. But this is not the topic of this article and will be discussed
in another post.</p>
</div>
<p>Ok now all rules and conditions can be added to your <em>.htaccess</em> file. It's <strong>very
important</strong> to place them in the right order before <code># The Friendly URLs part</code>
because Apache goes through the rules from top to bottom:</p>
<div class="highlight"><pre><span></span><code># detect language when requesting the root (/)
RewriteCond %{HTTP:Accept-Language} !^de [NC]
RewriteRule ^$ en/ [R=301,L]
RewriteRule ^$ de/ [R=301,L]

# redirect all requests to /en/favicon.ico and /de/favicon.ico
# to /favicon.ico
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(en|de)/favicon.ico$ favicon.ico [L,QSA]

# redirect all requests to /en/assets* and /de/assets* to /assets*
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(en|de)/assets(.*)$ assets$2 [L,QSA]
</code></pre></div>
<p>If you'd like to go deeper into defining rewrite rules you should read more
about the <a href="https://httpd.apache.org/docs/2.2/mod/mod_rewrite.html">Apache mod_rewrite module</a>.</p>
<h3 id="is-this-approach-optimal">Is this approach optimal?</h3>
<p>This solution works fine and editors can work as they did before without caring about relative links and subfolders. But I think this approach is rather a workaround than an optimal solution:</p>
<ul>
<li>When linking assets relatively you link to non-existing "virtual" files.</li>
<li>By applying the rewrite rules for the assets the same file is served via
  several different URLs: <em>https://​www.​example.com/assets/css/style.css</em>,
  <em>https://​www.​example.com/de/assets/css/style.css</em> and
  <em>https://​www.​example.com/en/assets/css/style.css</em> return the same content.</li>
<li>Files which are used in all language versions are not cached for the whole
  site by your browser: The browser doesn't know that
  <em>https://​www.​example.com/de/assets/css/style.css</em> and
  <em>https://​www.​example.com/en/assets/css/style.css</em> are the same.</li>
<li>When working with the GoogleSiteMap Extra you won't be able to serve a
  sitemap.xml for your whole site without modifying the Extra manually. This is
  because your documents are distributed over several contexts and GoogleSiteMap
  is only capable of creating a sitemap for one context. XML sitemaps are very
  helpful to tell a search engine bot where to find all your pages. So you
  should use them, and they should list all pages of your site!</li>
</ul>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The following section is outdated and will not take place in this form.</p>
</div>
<h3 id="the-optimal-approach-babel-23">The optimal approach: Babel 2.3!</h3>
<p>In my opinion the "cleanest" way to manage a multilingual website would be using
one single context for the whole site and placing your documents into resource
containers for each language. At the moment Babel doesn't support this approach.
But I have already developed a concept of how to change and extend Babel to be
able to use the Extra for both approaches: domain based and subfolder based.</p>
<p>Therefore, I'll introduce an additional level of abstraction into the Babel's
architecture which will make it possible to run Babel in domain-based or
subfolder-based mode. The look and feel will remain the same and the new version
should be compatible with older ones.</p>
<p>I'll need to change a lot of code, and currently I'm working on some other
(paid) projects, too.</p>
<p>I hope you like my plans and I appreciate your feedback!</p>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2010-2024 <a href="https://github.com/mikrobi">Jakob Class</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
  
  
  
  
  
  <a href="https://modx.com/extras/package/babel" target="_blank" rel="noopener" title="modx.com" class="md-social__link">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="m356 241.8 36.7 23.7V480l-133-83.8L356 241.8zM440 75H226.3l-23 37.8 153.5 96.5L440 75zm-89 142.8L55.2 32v214.5l46 29L351 217.8zM97 294.2 8 437h213.7l125-200.5L97 294.2z"/></svg>
  </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "navigation.instant", "navigation.top"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.8fd75fb4.min.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>